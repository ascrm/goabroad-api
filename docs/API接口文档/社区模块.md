# ç¤¾åŒºæ¨¡å— API æ¥å£æ–‡æ¡£

## 1. åˆ›å»ºå¸–å­

### è¯·æ±‚ä¿¡æ¯

**è¯·æ±‚æ–¹å¼ï¼š** `POST`

**è¯·æ±‚åœ°å€ï¼š** `/api/community/posts`

**è¯·æ±‚å¤´ï¼š**
```
Content-Type: application/json
satoken: <ç”¨æˆ·token>
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| contentType | string | æ˜¯ | å†…å®¹ç±»å‹ï¼š`TREND`(æ—¥å¸¸ç”Ÿæ´»åŠ¨æ€) / `QUESTION`(æé—®é¢˜) / `POST`(æ™®é€šå¸–å­) / `TIMELINE`(æ—¶é—´çº¿) / `VLOG`(è§†é¢‘) |
| parentPostId | long | å¦ | çˆ¶å¸–å­IDï¼ˆå›ç­”é—®é¢˜æ—¶å¿…å¡«ï¼Œå…³è”åˆ°é—®é¢˜å¸–å­IDï¼‰ |
| title | string | å¦ | æ ‡é¢˜ï¼ˆQUESTIONç±»å‹å»ºè®®å¡«å†™ï¼Œå…¶ä»–ç±»å‹å¯é€‰ï¼‰ |
| content | string | å¦ | æ­£æ–‡å†…å®¹ï¼ˆæ”¯æŒ Markdown æ ¼å¼ï¼‰ |
| summary | string | å¦ | æ‘˜è¦ï¼ˆç”¨äºåˆ—è¡¨å±•ç¤ºï¼Œä¸ä¼ åˆ™åç«¯è‡ªåŠ¨æˆªå–contentå‰100å­—ï¼‰ |
| category | string | å¦ | åˆ†ç±»æ ‡ç­¾ï¼ˆå¦‚ï¼šç•™å­¦ã€ç­¾è¯ã€ç”Ÿæ´»ç­‰ï¼‰ |
| coverImage | string | å¦ | å°é¢å›¾ç‰‡ URL |
| mediaUrls | array | å¦ | å›¾ç‰‡/è§†é¢‘ URL æ•°ç»„ï¼Œå¦‚ï¼š`["url1", "url2"]` |
| tags | array | å¦ | æ ‡ç­¾åˆ—è¡¨ï¼Œå¦‚ï¼š`["ç•™å­¦", "ç­¾è¯", "ç¾å›½"]` |
| status | string | å¦ | å‘å¸ƒçŠ¶æ€ï¼š`DRAFT`(è‰ç¨¿) / `PUBLISHED`(å·²å‘å¸ƒ)ï¼Œé»˜è®¤ `PUBLISHED` |
| allowComment | boolean | å¦ | æ˜¯å¦å…è®¸è¯„è®ºï¼Œé»˜è®¤ `true` |

### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šå‘å¸ƒæ”»ç•¥**
```json
{
  "contentType": "GUIDE",
  "title": "ç¾å›½F1ç­¾è¯é¢ç­¾å®Œæ•´æ”»ç•¥",
  "content": "ä»Šå¤©åˆšåˆšé€šè¿‡é¢ç­¾ï¼Œåˆ†äº«ä¸€ä¸‹æˆ‘çš„ç»éªŒ...\n\n## å‡†å¤‡ææ–™\n\n1. I-20è¡¨æ ¼\n2. æŠ¤ç…§\n3. ç…§ç‰‡\n\n## é¢è¯•è¿‡ç¨‹\n\né¢è¯•å®˜ä¸»è¦é—®äº†ä»¥ä¸‹é—®é¢˜ï¼š...",
  "summary": "F1ç­¾è¯é¢ç­¾é€šè¿‡ï¼Œåˆ†äº«å‡†å¤‡ææ–™å’Œé¢è¯•æŠ€å·§",
  "category": "ç­¾è¯",
  "coverImage": "https://cdn.goabroad.com/posts/cover-123.jpg",
  "mediaUrls": [
    "https://cdn.goabroad.com/posts/img1.jpg",
    "https://cdn.goabroad.com/posts/img2.jpg"
  ],
  "tags": ["ç­¾è¯", "ç¾å›½", "F1", "é¢ç­¾"],
  "status": "PUBLISHED"
}
```

**ç¤ºä¾‹2ï¼šå‘å¸ƒæé—®**
```json
{
  "contentType": "QUESTION",
  "title": "æ‰˜ç¦æˆç»©100åˆ†èƒ½ç”³è¯·åˆ°ä»€ä¹ˆå­¦æ ¡ï¼Ÿ",
  "content": "æœ¬äººæ‰˜ç¦100ï¼ŒGPA 3.5ï¼Œæƒ³ç”³è¯·ç¾å›½CSä¸“ä¸šç¡•å£«ï¼Œæœ‰å“ªäº›å­¦æ ¡æ¨èï¼Ÿæœ‰äº†è§£çš„æœ‹å‹å¯ä»¥åˆ†äº«ä¸€ä¸‹ç»éªŒå—ï¼Ÿ",
  "category": "ç•™å­¦",
  "tags": ["ç•™å­¦", "ç¾å›½", "æ‰˜ç¦", "CS"],
  "status": "PUBLISHED"
}
```

**ç¤ºä¾‹3ï¼šå›ç­”é—®é¢˜**
```json
{
  "contentType": "POST",
  "parentPostId": 123,
  "content": "æ ¹æ®ä½ çš„æ¡ä»¶ï¼Œæˆ‘å»ºè®®å¯ä»¥ç”³è¯·ä»¥ä¸‹å­¦æ ¡ï¼š\n\n1. **University of Washington** - CSä¸“ä¸šæ’åå¾ˆé«˜\n2. **UCSD** - åœ°ç†ä½ç½®å¥½ï¼Œå°±ä¸šæœºä¼šå¤š\n3. **NYU** - ä½äºçº½çº¦ï¼Œå®ä¹ æœºä¼šä¸°å¯Œ\n\næ‰˜ç¦100åˆ†å·²ç»æ»¡è¶³å¤§éƒ¨åˆ†å­¦æ ¡çš„åŸºæœ¬è¦æ±‚äº†...",
  "category": "ç•™å­¦",
  "tags": ["ç•™å­¦", "ç¾å›½", "å­¦æ ¡æ¨è"],
  "status": "PUBLISHED"
}
```

**ç¤ºä¾‹4ï¼šå‘å¸ƒæ—¥å¸¸åŠ¨æ€**
```json
{
  "contentType": "TREND",
  "content": "ä»Šå¤©ç¬¬ä¸€å¤©åˆ°çº½çº¦ï¼Œæ—¶å·®è¿˜æ²¡å€’è¿‡æ¥ğŸ˜´ åˆ†äº«å‡ å¼ åˆåˆ°ç¾å›½çš„ç…§ç‰‡~",
  "coverImage": "https://cdn.goabroad.com/posts/ny-day1-cover.jpg",
  "mediaUrls": [
    "https://cdn.goabroad.com/posts/ny-day1-1.jpg",
    "https://cdn.goabroad.com/posts/ny-day1-2.jpg",
    "https://cdn.goabroad.com/posts/ny-day1-3.jpg"
  ],
  "category": "ç”Ÿæ´»",
  "tags": ["ç”Ÿæ´»", "çº½çº¦", "æ—¥å¸¸"],
  "status": "PUBLISHED"
}
```

### å“åº”æ•°æ®

**æˆåŠŸå“åº”ï¼š**

```json
{
  "code": 200,
  "message": "å‘å¸ƒæˆåŠŸ",
  "data": {
    "id": 123,
    "authorId": 456,
    "contentType": "GUIDE",
    "title": "ç¾å›½F1ç­¾è¯é¢ç­¾å®Œæ•´æ”»ç•¥",
    "content": "ä»Šå¤©åˆšåˆšé€šè¿‡é¢ç­¾ï¼Œåˆ†äº«ä¸€ä¸‹æˆ‘çš„ç»éªŒ...",
    "summary": "F1ç­¾è¯é¢ç­¾é€šè¿‡ï¼Œåˆ†äº«å‡†å¤‡ææ–™å’Œé¢è¯•æŠ€å·§",
    "category": "ç­¾è¯",
    "coverImage": "https://cdn.goabroad.com/posts/cover-123.jpg",
    "mediaUrls": [
      "https://cdn.goabroad.com/posts/img1.jpg",
      "https://cdn.goabroad.com/posts/img2.jpg"
    ],
    "status": "PUBLISHED",
    "allowComment": true,
    "viewCount": 0,
    "likeCount": 0,
    "commentCount": 0,
    "collectCount": 0,
    "shareCount": 0,
    "isFeatured": false,
    "isPinned": false,
    "isHot": false,
    "createdAt": "2024-11-03T10:00:00",
    "updatedAt": "2024-11-03T10:00:00",
    "publishedAt": "2024-11-03T10:00:00"
  }
}
```

**å¤±è´¥å“åº”ï¼š**

```json
{
  "code": 400,
  "message": "å†…å®¹ä¸èƒ½ä¸ºç©º",
  "data": null
}
```

### å­—æ®µè¯´æ˜

**å“åº”å­—æ®µï¼š**
- `id` - å¸–å­ID
- `authorId` - ä½œè€…ç”¨æˆ·ID
- `contentType` - å†…å®¹ç±»å‹
- `title` - æ ‡é¢˜
- `content` - æ­£æ–‡ï¼ˆMarkdownæ ¼å¼ï¼‰
- `summary` - æ‘˜è¦
- `category` - åˆ†ç±»
- `coverImage` - å°é¢å›¾URL
- `mediaUrls` - åª’ä½“æ–‡ä»¶URLæ•°ç»„ï¼ˆå›¾ç‰‡/è§†é¢‘ï¼‰
- `status` - å‘å¸ƒçŠ¶æ€
- `allowComment` - æ˜¯å¦å…è®¸è¯„è®º
- `viewCount` - æµè§ˆé‡
- `likeCount` - ç‚¹èµæ•°
- `commentCount` - è¯„è®ºæ•°
- `collectCount` - æ”¶è—æ•°
- `shareCount` - åˆ†äº«æ•°
- `isFeatured` - æ˜¯å¦ç²¾é€‰ï¼ˆç®¡ç†å‘˜è®¾ç½®ï¼‰
- `isPinned` - æ˜¯å¦ç½®é¡¶ï¼ˆç®¡ç†å‘˜è®¾ç½®ï¼‰
- `isHot` - æ˜¯å¦çƒ­é—¨ï¼ˆç³»ç»Ÿè®¡ç®—ï¼‰
- `createdAt` - åˆ›å»ºæ—¶é—´
- `updatedAt` - æ›´æ–°æ—¶é—´
- `publishedAt` - å‘å¸ƒæ—¶é—´

### é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 400 | å‚æ•°é”™è¯¯ï¼ˆå¿…å¡«å­—æ®µç¼ºå¤±æˆ–æ ¼å¼é”™è¯¯ï¼‰ |
| 401 | æœªç™»å½•æˆ– token å¤±æ•ˆ |
| 403 | æ— æƒé™æ“ä½œ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### ä¸šåŠ¡è§„åˆ™

1. **å¿…å¡«å­—æ®µï¼š**
   - `contentType` - å¿…å¡«
   - `title` - QUESTIONã€GUIDE ç±»å‹å»ºè®®å¡«å†™ï¼Œæå‡å†…å®¹å¯è¯»æ€§

2. **å­—æ®µé™åˆ¶ï¼š**
   - `title` - æœ€å¤§200å­—ç¬¦
   - `summary` - æœ€å¤§500å­—ç¬¦
   - `content` - æœ€å¤§50000å­—ç¬¦ï¼ˆå¯é€‰ï¼‰
   - `mediaUrls` - æœ€å¤š9å¼ å›¾ç‰‡/1ä¸ªè§†é¢‘
   - `tags` - æ ‡ç­¾æ•°ç»„ï¼Œå»ºè®®æ¯ä¸ªå¸–å­ä¸è¶…è¿‡10ä¸ªæ ‡ç­¾

3. **è‡ªåŠ¨å¤„ç†ï¼š**
   - å¦‚æœä¸ä¼  `summary`ï¼Œåç«¯è‡ªåŠ¨æˆªå– `content` å‰100å­—ä½œä¸ºæ‘˜è¦
   - è‰ç¨¿çŠ¶æ€çš„å¸–å­ä¸ä¼šå‡ºç°åœ¨å…¬å¼€åˆ—è¡¨ä¸­
   - `publishedAt` å­—æ®µåœ¨çŠ¶æ€ä¸º `PUBLISHED` æ—¶è‡ªåŠ¨è®¾ç½®ä¸ºå½“å‰æ—¶é—´
   - æ ‡ç­¾ä¼šè‡ªåŠ¨åˆ›å»ºæˆ–å…³è”åˆ°ç°æœ‰æ ‡ç­¾ï¼Œç³»ç»Ÿä¼šç»´æŠ¤æ ‡ç­¾çš„å¸–å­è®¡æ•°

4. **å†…å®¹ç±»å‹è¯´æ˜ï¼š**
   - `TREND` - æ—¥å¸¸ç”Ÿæ´»åŠ¨æ€ï¼Œç®€çŸ­çš„æ–‡å­—+å›¾ç‰‡åˆ†äº«
   - `QUESTION` - æé—®é¢˜ï¼Œå»ºè®®å¡«å†™æ ‡é¢˜ï¼Œæ–¹ä¾¿å…¶ä»–ç”¨æˆ·å¿«é€Ÿäº†è§£é—®é¢˜
   - `ANSWER` - å†™ç­”æ¡ˆï¼Œé’ˆå¯¹æŸä¸ªé—®é¢˜çš„å›ç­”å†…å®¹
   - `GUIDE` - å†™æ”»ç•¥ï¼Œè¯¦ç»†çš„ç»éªŒåˆ†äº«ã€æ•™ç¨‹ç­‰ï¼Œå»ºè®®å¡«å†™æ ‡é¢˜å’Œå°é¢å›¾

5. **æ ‡ç­¾å¤„ç†ï¼š**
   - å¦‚æœæ ‡ç­¾å·²å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨å…³è”åˆ°å¸–å­å¹¶å¢åŠ è¯¥æ ‡ç­¾çš„å¸–å­è®¡æ•°
   - å¦‚æœæ ‡ç­¾ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ–°æ ‡ç­¾
   - æ ‡ç­¾åç§°ä¼šè‡ªåŠ¨å»é™¤é¦–å°¾ç©ºæ ¼ï¼Œç©ºæ ‡ç­¾ä¼šè¢«å¿½ç•¥
   - æ¯ä¸ªå¸–å­å¯ä»¥æ·»åŠ å¤šä¸ªæ ‡ç­¾ï¼Œæ–¹ä¾¿åˆ†ç±»å’Œæ£€ç´¢

---

## 2. æ ¹æ®å†…å®¹ç±»å‹æŸ¥è¯¢å¸–å­åˆ—è¡¨

### è¯·æ±‚ä¿¡æ¯

**è¯·æ±‚æ–¹å¼ï¼š** `GET`

**è¯·æ±‚åœ°å€ï¼š** `/api/community/posts`

**è¯·æ±‚å¤´ï¼š**
```
satoken: <ç”¨æˆ·token> ï¼ˆå¯é€‰ï¼Œæœªç™»å½•ä¹Ÿå¯è®¿é—®ï¼‰
```

### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| contentType | string | æ˜¯ | å†…å®¹ç±»å‹ï¼š`TREND`(æ—¥å¸¸åŠ¨æ€) / `QUESTION`(æé—®) / `ANSWER`(ç­”æ¡ˆ) / `GUIDE`(æ”»ç•¥) |
| page | int | å¦ | é¡µç ï¼ˆä»0å¼€å§‹ï¼‰ï¼Œé»˜è®¤ `0` |
| size | int | å¦ | æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ `20` |
| sortBy | string | å¦ | æ’åºå­—æ®µï¼Œé»˜è®¤ `createdAt` |
| direction | string | å¦ | æ’åºæ–¹å‘ï¼š`ASC`(å‡åº) / `DESC`(é™åº)ï¼Œé»˜è®¤ `DESC` |

### è¯·æ±‚ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šæŸ¥è¯¢æ”»ç•¥åˆ—è¡¨**
```
GET /api/community/posts?contentType=GUIDE&page=0&size=20&sortBy=createdAt&direction=DESC
```

**ç¤ºä¾‹2ï¼šæŸ¥è¯¢é—®é¢˜åˆ—è¡¨ï¼ˆæŒ‰è¯„è®ºæ•°æ’åºï¼‰**
```
GET /api/community/posts?contentType=QUESTION&page=0&size=10&sortBy=commentCount&direction=DESC
```

**ç¤ºä¾‹3ï¼šæŸ¥è¯¢ç”Ÿæ´»åŠ¨æ€**
```
GET /api/community/posts?contentType=TREND&page=0&size=20
```

### å“åº”æ•°æ®

**æˆåŠŸå“åº”ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "content": [
      {
        "id": 123,
        "title": "ç¾å›½F1ç­¾è¯é¢ç­¾å®Œæ•´æ”»ç•¥",
        "contentPreview": "ä»Šå¤©åˆšåˆšé€šè¿‡é¢ç­¾ï¼Œåˆ†äº«ä¸€ä¸‹æˆ‘çš„ç»éªŒ...",
        "coverImage": "https://cdn.goabroad.com/posts/cover-123.jpg",
        "contentType": "GUIDE",
        "author": {
          "id": 1001,
          "username": "zhangsan",
          "nickname": "å¼ ä¸‰",
          "avatarUrl": "https://cdn.goabroad.com/avatars/1001.jpg",
          "bio": "æ­£åœ¨å‡†å¤‡èµ´ç¾ç•™å­¦",
          "isFollowing": false,
          "createdAt": "2024-01-15T10:00:00"
        },
        "tags": ["ç­¾è¯", "ç¾å›½", "F1", "é¢ç­¾"],
        "likeCount": 125,
        "commentCount": 32,
        "collectCount": 85,
        "viewCount": 1520,
        "isLiked": false,
        "isCollected": false,
        "createdAt": "2024-11-03T10:00:00"
      },
      {
        "id": 124,
        "title": "è‹±å›½Tier 4å­¦ç”Ÿç­¾è¯ç”³è¯·æµç¨‹",
        "contentPreview": "è‹±å›½å­¦ç”Ÿç­¾è¯ç”³è¯·éœ€è¦å‡†å¤‡çš„ææ–™...",
        "coverImage": "https://cdn.goabroad.com/posts/cover-124.jpg",
        "contentType": "GUIDE",
        "author": {
          "id": 1002,
          "username": "lisi",
          "nickname": "æå››",
          "avatarUrl": "https://cdn.goabroad.com/avatars/1002.jpg",
          "bio": "è‹±å›½ç•™å­¦ç”Ÿ",
          "isFollowing": true,
          "createdAt": "2024-02-20T14:30:00"
        },
        "tags": ["ç­¾è¯", "è‹±å›½", "Tier4"],
        "likeCount": 98,
        "commentCount": 21,
        "collectCount": 67,
        "viewCount": 1203,
        "isLiked": false,
        "isCollected": true,
        "createdAt": "2024-11-02T15:30:00"
      }
    ],
    "pageable": {
      "pageNumber": 0,
      "pageSize": 20,
      "sort": {
        "sorted": true,
        "unsorted": false,
        "empty": false
      },
      "offset": 0,
      "paged": true,
      "unpaged": false
    },
    "totalPages": 5,
    "totalElements": 96,
    "last": false,
    "size": 20,
    "number": 0,
    "sort": {
      "sorted": true,
      "unsorted": false,
      "empty": false
    },
    "numberOfElements": 20,
    "first": true,
    "empty": false
  }
}
```

**å¤±è´¥å“åº”ï¼š**

```json
{
  "code": 400,
  "message": "ä¸æ”¯æŒçš„å†…å®¹ç±»å‹: INVALID_TYPE",
  "data": null
}
```

### å­—æ®µè¯´æ˜

**å“åº”å­—æ®µï¼ˆcontentåˆ—è¡¨ä¸­çš„æ¯ä¸ªå¯¹è±¡ï¼‰ï¼š**
- `id` - å¸–å­ID
- `title` - æ ‡é¢˜
- `contentPreview` - å†…å®¹é¢„è§ˆ/æ‘˜è¦
- `coverImage` - å°é¢å›¾URL
- `contentType` - å†…å®¹ç±»å‹
- `author` - ä½œè€…ä¿¡æ¯å¯¹è±¡
  - `id` - ç”¨æˆ·ID
  - `username` - ç”¨æˆ·å
  - `nickname` - æ˜µç§°
  - `avatarUrl` - å¤´åƒURL
  - `bio` - ä¸ªäººç®€ä»‹
  - `isFollowing` - å½“å‰ç”¨æˆ·æ˜¯å¦å…³æ³¨è¯¥ä½œè€…ï¼ˆæœªç™»å½•ä¸ºfalseï¼‰
  - `createdAt` - ç”¨æˆ·åˆ›å»ºæ—¶é—´
- `tags` - æ ‡ç­¾æ•°ç»„
- `likeCount` - ç‚¹èµæ•°
- `commentCount` - è¯„è®ºæ•°
- `collectCount` - æ”¶è—æ•°
- `viewCount` - æµè§ˆæ•°
- `isLiked` - å½“å‰ç”¨æˆ·æ˜¯å¦ç‚¹èµï¼ˆæœªç™»å½•ä¸ºfalseï¼‰
- `isCollected` - å½“å‰ç”¨æˆ·æ˜¯å¦æ”¶è—ï¼ˆæœªç™»å½•ä¸ºfalseï¼‰
- `createdAt` - åˆ›å»ºæ—¶é—´

**åˆ†é¡µå­—æ®µï¼š**
- `content` - å½“å‰é¡µçš„æ•°æ®åˆ—è¡¨
- `totalPages` - æ€»é¡µæ•°
- `totalElements` - æ€»è®°å½•æ•°
- `size` - æ¯é¡µå¤§å°
- `number` - å½“å‰é¡µç ï¼ˆä»0å¼€å§‹ï¼‰
- `numberOfElements` - å½“å‰é¡µå®é™…è®°å½•æ•°
- `first` - æ˜¯å¦ç¬¬ä¸€é¡µ
- `last` - æ˜¯å¦æœ€åä¸€é¡µ
- `empty` - æ˜¯å¦ä¸ºç©º

### é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 400 | å‚æ•°é”™è¯¯ï¼ˆå†…å®¹ç±»å‹ä¸èƒ½ä¸ºç©ºã€é¡µç ä¸èƒ½å°äº0ã€æ¯é¡µæ•°é‡å¿…é¡»åœ¨1-100ä¹‹é—´ï¼‰ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

### ä¸šåŠ¡è§„åˆ™

1. **æŸ¥è¯¢ç­–ç•¥ï¼ˆå·¥å‚-ç­–ç•¥æ¨¡å¼ï¼‰ï¼š**
   - **TRENDï¼ˆæ—¥å¸¸åŠ¨æ€ï¼‰**ï¼šæŒ‰å‘å¸ƒæ—¶é—´å€’åºï¼Œå±•ç¤ºæœ€æ–°ç”Ÿæ´»åŠ¨æ€
   - **QUESTIONï¼ˆæé—®ï¼‰**ï¼šå¯æŒ‰è¯„è®ºæ•°ã€æµè§ˆé‡ç­‰æ’åºï¼Œä¼˜å…ˆå±•ç¤ºçƒ­é—¨æˆ–æœªå›ç­”é—®é¢˜
   - **ANSWERï¼ˆç­”æ¡ˆï¼‰**ï¼šå¯æŒ‰ç‚¹èµæ•°æ’åºï¼Œä¼˜å…ˆå±•ç¤ºé«˜è´¨é‡å›ç­”
   - **GUIDEï¼ˆæ”»ç•¥ï¼‰**ï¼šç»¼åˆè€ƒè™‘æµè§ˆã€ç‚¹èµã€æ”¶è—ç­‰æŒ‡æ ‡ï¼Œä¼˜å…ˆå±•ç¤ºçƒ­é—¨å’Œç²¾é€‰æ”»ç•¥

2. **æ’åºè§„åˆ™ï¼š**
   - æ”¯æŒçš„æ’åºå­—æ®µï¼š`createdAt`ï¼ˆåˆ›å»ºæ—¶é—´ï¼‰ã€`viewCount`ï¼ˆæµè§ˆé‡ï¼‰ã€`likeCount`ï¼ˆç‚¹èµæ•°ï¼‰ã€`commentCount`ï¼ˆè¯„è®ºæ•°ï¼‰ã€`collectCount`ï¼ˆæ”¶è—æ•°ï¼‰
   - é»˜è®¤æŒ‰åˆ›å»ºæ—¶é—´å€’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰

3. **åˆ†é¡µé™åˆ¶ï¼š**
   - æ¯é¡µæœ€å¤šè¿”å›100æ¡è®°å½•
   - é¡µç ä»0å¼€å§‹

4. **æƒé™è¯´æ˜ï¼š**
   - æœªç™»å½•ç”¨æˆ·å¯ä»¥æŸ¥è¯¢åˆ—è¡¨ï¼Œä½† `isLiked` å’Œ `isCollected` å­—æ®µå§‹ç»ˆä¸º `false`
   - ç™»å½•ç”¨æˆ·å¯ä»¥çœ‹åˆ°è‡ªå·±çš„ç‚¹èµå’Œæ”¶è—çŠ¶æ€

5. **ä½œè€…ä¿¡æ¯ï¼š**
   - ç³»ç»Ÿä¼šè‡ªåŠ¨æŸ¥è¯¢å¹¶å¡«å……æ¯ä¸ªå¸–å­çš„ä½œè€…ä¿¡æ¯
   - ä½¿ç”¨æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…N+1æŸ¥è¯¢é—®é¢˜
   - å¦‚æœä½œè€…å·²è¢«åˆ é™¤ï¼Œ`author` å­—æ®µå¯èƒ½ä¸º `null`
   - `isFollowing` å­—æ®µè¡¨ç¤ºå½“å‰ç”¨æˆ·æ˜¯å¦å…³æ³¨è¯¥ä½œè€…ï¼ˆæœªç™»å½•ä¸ºfalseï¼‰

6. **æ•°æ®è¿‡æ»¤ï¼š**
   - åªè¿”å›å·²å‘å¸ƒçŠ¶æ€ï¼ˆ`PUBLISHED`ï¼‰çš„å¸–å­
   - è‡ªåŠ¨è¿‡æ»¤å·²åˆ é™¤çš„å¸–å­
   - è‰ç¨¿çŠ¶æ€çš„å¸–å­ä¸ä¼šå‡ºç°åœ¨åˆ—è¡¨ä¸­

---

## 4. é—®ç­”åŠŸèƒ½è¯´æ˜

### åŠŸèƒ½æ¦‚è¿°

ç¤¾åŒºæ”¯æŒé—®ç­”åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥æé—®å¹¶å›ç­”é—®é¢˜ã€‚é—®ç­”é‡‡ç”¨å¸–å­å…³è”çš„æ–¹å¼å®ç°ï¼š

- **é—®é¢˜å¸–å­**ï¼š`contentType` ä¸º `QUESTION`ï¼Œ`parentPostId` ä¸º `null`
- **å›ç­”å¸–å­**ï¼š`contentType` ä¸º `POST`ï¼Œ`parentPostId` æŒ‡å‘é—®é¢˜å¸–å­çš„ ID

### æ•°æ®åº“è®¾è®¡

åœ¨ `posts` è¡¨ä¸­é€šè¿‡ä»¥ä¸‹å­—æ®µå®ç°é—®ç­”å…³è”ï¼š

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| parent_post_id | BIGINT | çˆ¶å¸–å­IDï¼ˆå›ç­”å¸–å­å…³è”åˆ°é—®é¢˜å¸–å­ï¼Œé—®é¢˜å¸–å­ä¸ºNULLï¼‰ |
| answer_count | INTEGER | å›ç­”æ•°ï¼ˆä»…é—®é¢˜å¸–å­æœ‰æ•ˆï¼Œç”¨äºå¿«é€Ÿæ˜¾ç¤ºå›ç­”æ•°é‡ï¼‰ |

### ä½¿ç”¨åœºæ™¯

#### 1. å‘å¸ƒé—®é¢˜

```json
POST /api/community/posts
{
  "contentType": "QUESTION",
  "title": "æ‰˜ç¦æˆç»©100åˆ†èƒ½ç”³è¯·åˆ°ä»€ä¹ˆå­¦æ ¡ï¼Ÿ",
  "content": "æœ¬äººæ‰˜ç¦100ï¼ŒGPA 3.5ï¼Œæƒ³ç”³è¯·ç¾å›½CSä¸“ä¸šç¡•å£«ï¼Œæœ‰å“ªäº›å­¦æ ¡æ¨èï¼Ÿ",
  "category": "ç•™å­¦",
  "tags": ["ç•™å­¦", "ç¾å›½", "æ‰˜ç¦", "CS"]
}
```

#### 2. å›ç­”é—®é¢˜

```json
POST /api/community/posts
{
  "contentType": "POST",
  "parentPostId": 123,  // é—®é¢˜å¸–å­çš„ID
  "content": "æ ¹æ®ä½ çš„æ¡ä»¶ï¼Œæˆ‘å»ºè®®å¯ä»¥ç”³è¯·ä»¥ä¸‹å­¦æ ¡ï¼š\n\n1. University of Washington...",
  "category": "ç•™å­¦",
  "tags": ["ç•™å­¦", "ç¾å›½", "å­¦æ ¡æ¨è"]
}
```

#### 3. æŸ¥è¯¢æŸä¸ªé—®é¢˜çš„æ‰€æœ‰å›ç­”

```
GET /api/community/posts?parentPostId=123&page=0&size=20
```

**æŸ¥è¯¢å‚æ•°è¯´æ˜ï¼š**
- `parentPostId`: é—®é¢˜å¸–å­çš„ID
- `page`: é¡µç ï¼ˆä»0å¼€å§‹ï¼‰
- `size`: æ¯é¡µæ•°é‡

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "content": [
      {
        "id": 456,
        "parentPostId": 123,
        "contentType": "POST",
        "content": "æ ¹æ®ä½ çš„æ¡ä»¶...",
        "author": {
          "id": 789,
          "nickname": "ç•™å­¦é¡¾é—®å°ç‹",
          "avatarUrl": "..."
        },
        "likeCount": 25,
        "commentCount": 5,
        "createdAt": "2024-11-05T10:00:00"
      }
    ],
    "totalElements": 15,
    "totalPages": 1,
    "number": 0,
    "size": 20
  }
}
```

#### 4. æŸ¥çœ‹é—®é¢˜è¯¦æƒ…ï¼ˆåŒ…å«å›ç­”æ•°ï¼‰

```
GET /api/community/posts/{postId}
```

**å“åº”ç¤ºä¾‹ï¼š**

```json
{
  "code": 200,
  "message": "æŸ¥è¯¢æˆåŠŸ",
  "data": {
    "id": 123,
    "contentType": "QUESTION",
    "parentPostId": null,
    "title": "æ‰˜ç¦æˆç»©100åˆ†èƒ½ç”³è¯·åˆ°ä»€ä¹ˆå­¦æ ¡ï¼Ÿ",
    "content": "æœ¬äººæ‰˜ç¦100ï¼ŒGPA 3.5...",
    "answerCount": 15,  // å›ç­”æ•°é‡
    "likeCount": 30,
    "commentCount": 8,
    "viewCount": 520,
    "author": {
      "id": 101,
      "nickname": "ç•™å­¦å°ç™½",
      "avatarUrl": "..."
    },
    "createdAt": "2024-11-04T15:30:00"
  }
}
```

### ä¸šåŠ¡è§„åˆ™

1. **é—®é¢˜å¸–å­ç‰¹ç‚¹ï¼š**
   - `contentType` å¿…é¡»ä¸º `QUESTION`
   - `parentPostId` å¿…é¡»ä¸º `null`
   - `answerCount` å­—æ®µæ˜¾ç¤ºè¯¥é—®é¢˜çš„å›ç­”æ•°é‡
   - å»ºè®®å¡«å†™ `title` å­—æ®µä½œä¸ºé—®é¢˜æ ‡é¢˜

2. **å›ç­”å¸–å­ç‰¹ç‚¹ï¼š**
   - `contentType` ä¸º `POST`
   - `parentPostId` å¿…é¡»æŒ‡å‘ä¸€ä¸ªæœ‰æ•ˆçš„é—®é¢˜å¸–å­ID
   - åˆ›å»ºå›ç­”æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ›´æ–°é—®é¢˜å¸–å­çš„ `answerCount` +1

3. **æ•°æ®ä¸€è‡´æ€§ï¼š**
   - å½“åˆ é™¤é—®é¢˜å¸–å­æ—¶ï¼Œæ‰€æœ‰å…³è”çš„å›ç­”å¸–å­ä¼šè¢«çº§è”åˆ é™¤ï¼ˆæ•°æ®åº“å¤–é”®çº¦æŸï¼‰
   - åˆ é™¤å›ç­”å¸–å­æ—¶ï¼Œé—®é¢˜å¸–å­çš„ `answerCount` ä¼šè‡ªåŠ¨ -1

4. **æŸ¥è¯¢ä¼˜åŒ–ï¼š**
   - ä½¿ç”¨ `idx_posts_parent_post_id` ç´¢å¼•å¿«é€ŸæŸ¥è¯¢æŸä¸ªé—®é¢˜çš„æ‰€æœ‰å›ç­”
   - `answerCount` å­—æ®µå†—ä½™å­˜å‚¨ï¼Œé¿å…æ¯æ¬¡éƒ½ç»Ÿè®¡å›ç­”æ•°é‡

### æ³¨æ„äº‹é¡¹

âš ï¸ **é‡è¦æç¤ºï¼š**

1. åˆ›å»ºå›ç­”æ—¶ï¼Œå¿…é¡»ç¡®ä¿ `parentPostId` æŒ‡å‘çš„å¸–å­å­˜åœ¨ä¸”ç±»å‹ä¸º `QUESTION`
2. å›ç­”å¸–å­ä¸èƒ½å†æœ‰å­å›ç­”ï¼ˆä¸æ”¯æŒå¤šå±‚åµŒå¥—ï¼‰
3. å¦‚æœéœ€è¦é’ˆå¯¹å›ç­”è¿›è¡Œè®¨è®ºï¼Œè¯·ä½¿ç”¨è¯„è®ºåŠŸèƒ½
4. `answerCount` å­—æ®µç”±ç³»ç»Ÿè‡ªåŠ¨ç»´æŠ¤ï¼Œä¸æ¥å—æ‰‹åŠ¨è®¾ç½®
