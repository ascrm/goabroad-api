# ç”¨æˆ·æ¨¡å— (User)

## 2.1 è·å–ç”¨æˆ·å…¬å¼€èµ„æ–™

**æ¥å£**: `GET /users/:userId`  
**è¯´æ˜**: è·å–æŒ‡å®šç”¨æˆ·çš„å…¬å¼€èµ„æ–™  
**éœ€è¦è®¤è¯**: å¦

### URL å‚æ•°

```
userId: ç”¨æˆ· ID
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "id": 123,
    "username": "goabroad_xiaoxin",
    "nickname": "GoAbroadå°æ–°",
    "avatarUrl": "https://cdn.goabroad.com/avatars/123.jpg",
    "bio": "æ­£åœ¨å‡†å¤‡ç¾å›½ç•™å­¦",
    "gender": "MALE",
    "birthDate": "1995-06-15",
    "location": "åŒ—äº¬",
    "postCount": 25,
    "followerCount": 120,
    "followingCount": 85,
    "status": "ACTIVE",
    "isFollowing": false,
    "createdAt": "2024-01-01T10:00:00"
  }
}
```

**ğŸ”§ [å·²ä¿®æ­£ - é‡è¦]**: 
- idæ”¹ä¸ºæ•°å­—ç±»å‹
- avataræ”¹ä¸ºavatarUrlï¼ˆä¸æ•°æ®åº“avatar_urlä¸€è‡´ï¼‰
- ç§»é™¤ level, badgesï¼ˆæ•°æ®åº“usersè¡¨æ— è¿™äº›å­—æ®µï¼‰
- ç§»é™¤ stats å¯¹è±¡ï¼Œç›´æ¥ä½¿ç”¨ postCount, followerCount, followingCountï¼ˆä¸æ•°æ®åº“å­—æ®µä¸€è‡´ï¼‰
- æ·»åŠ  birthDate, locationï¼ˆæ•°æ®åº“usersè¡¨æœ‰è¿™äº›å­—æ®µï¼‰
- æ—¶é—´æ ¼å¼ç»Ÿä¸€å»æ‰Zåç¼€

---

## 2.2 æ›´æ–°ç”¨æˆ·èµ„æ–™

**æ¥å£**: `PUT /users/profile`  
**è¯´æ˜**: æ›´æ–°å½“å‰ç”¨æˆ·çš„èµ„æ–™  
**éœ€è¦è®¤è¯**: æ˜¯

### è¯·æ±‚å‚æ•°

```json
{
  "nickname": "æ–°æ˜µç§°",
  "bio": "ä¸ªäººç®€ä»‹",
  "gender": "MALE",
  "birthDate": "1995-06-15",
  "location": "åŒ—äº¬"
}
```

**ğŸ”§ [å·²ä¿®æ­£]**: 
- æ‰€æœ‰å­—æ®µä¸æ•°æ®åº“usersè¡¨ä¸€è‡´
- ç§»é™¤targetCountryã€targetTypeã€targetDateã€currentStatusï¼ˆè¿™äº›å­—æ®µå±äºuser_preferencesè¡¨ï¼Œåº”ä½¿ç”¨å•ç‹¬çš„æ¥å£æ›´æ–°ï¼‰

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "èµ„æ–™æ›´æ–°æˆåŠŸ",
  "data": {
    "id": 123,
    "username": "zhangsan",
    "nickname": "æ–°æ˜µç§°",
    "bio": "ä¸ªäººç®€ä»‹",
    "gender": "MALE",
    "birthDate": "1995-06-15",
    "location": "åŒ—äº¬",
    "status": "ACTIVE",
    "updatedAt": "2024-10-25T10:30:00"
  }
}
```

**ğŸ”§ [å·²ä¿®æ­£]**: 
- idæ”¹ä¸ºæ•°å­—ç±»å‹
- æ·»åŠ  birthDate, locationï¼ˆä¸æ•°æ®åº“å­—æ®µä¸€è‡´ï¼‰
- ç§»é™¤user_preferencesç›¸å…³å­—æ®µ

---

## 2.3 ä¸Šä¼ å¤´åƒ

**æ¥å£**: `POST /users/avatar`  
**è¯´æ˜**: ä¸Šä¼ ç”¨æˆ·å¤´åƒ  
**éœ€è¦è®¤è¯**: æ˜¯  
**Content-Type**: `multipart/form-data`

### è¯·æ±‚å‚æ•°

```
avatar: Fileï¼ˆå›¾ç‰‡æ–‡ä»¶ï¼‰
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å¤´åƒä¸Šä¼ æˆåŠŸ",
  "data": {
    "avatarUrl": "https://cdn.goabroad.com/avatars/123.jpg",
    "thumbnailUrl": "https://cdn.goabroad.com/avatars/123_thumb.jpg"
  }
}
```

**ğŸ”§ [å·²ä¿®æ­£]**: avataræ”¹ä¸ºavatarUrlï¼Œthumbnailæ”¹ä¸ºthumbnailUrlï¼ˆä¸æ•°æ®åº“å‘½åä¸€è‡´ï¼‰

---

## 2.4 è·å–ç”¨æˆ·å‘å¸ƒçš„å¸–å­

**æ¥å£**: `GET /users/:userId/posts`  
**è¯´æ˜**: è·å–æŒ‡å®šç”¨æˆ·å‘å¸ƒçš„å¸–å­åˆ—è¡¨  
**éœ€è¦è®¤è¯**: å¦

### URL å‚æ•°

```
userId: ç”¨æˆ· ID
```

### Query å‚æ•°

```
page: é¡µç ï¼Œé»˜è®¤ 1
pageSize: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ 20
type: å¸–å­ç±»å‹ (all, POST, QUESTION, TIMELINE)
```

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "Success",
  "data": {
    "items": [
      {
        "id": 123,
        "title": "ç¾å›½F1ç­¾è¯é¢ç­¾ç»éªŒåˆ†äº«",
        "summary": "ä»Šå¤©åˆšåˆšé€šè¿‡é¢ç­¾...",
        "coverImage": "https://cdn.goabroad.com/posts/cover-123.jpg",
        "contentType": "POST",
        "tags": ["ç¾å›½", "ç­¾è¯", "F1"],
        "likeCount": 125,
        "commentCount": 32,
        "collectCount": 85,
        "viewCount": 1520,
        "isLiked": false,
        "isCollected": false,
        "createdAt": "2024-10-20T10:00:00"
      }
    ],
    "pagination": {
      "currentPage": 1,
      "pageSize": 20,
      "totalItems": 25,
      "totalPages": 2,
      "hasNext": true,
      "hasPrevious": false,
      "isFirstPage": true,
      "isLastPage": false
    }
  }
}
```

**ğŸ”§ [å·²ä¿®æ­£]**: 
- idæ”¹ä¸ºæ•°å­—ç±»å‹
- contentæ”¹ä¸ºsummaryï¼ˆåˆ—è¡¨æ˜¾ç¤ºæ‘˜è¦ï¼‰
- typeæ”¹ä¸ºcontentTypeï¼ˆä¸æ•°æ®åº“content_typeä¸€è‡´ï¼‰
- paginationç»“æ„æ”¹ä¸ºç»Ÿä¸€æ ¼å¼ï¼ˆä¸æ–‡æ¡£å¼€å¤´å®šä¹‰ä¸€è‡´ï¼‰
- ç§»é™¤æ—¶é—´Zåç¼€

---

## 2.5 è·å–ç”¨æˆ·æ”¶è—çš„å¸–å­

**æ¥å£**: `GET /users/favorites`  
**è¯´æ˜**: è·å–å½“å‰ç”¨æˆ·æ”¶è—çš„å¸–å­  
**éœ€è¦è®¤è¯**: æ˜¯

### Query å‚æ•°

```
page: é¡µç 
pageSize: æ¯é¡µæ•°é‡
```

---

## 2.6 å…³æ³¨ç”¨æˆ·

**æ¥å£**: `POST /users/:userId/follow`  
**è¯´æ˜**: å…³æ³¨æŒ‡å®šç”¨æˆ·  
**éœ€è¦è®¤è¯**: æ˜¯

### å“åº”ç¤ºä¾‹

```json
{
  "code": 200,
  "message": "å…³æ³¨æˆåŠŸ",
  "data": {
    "isFollowing": true,
    "followersCount": 121
  }
}
```

---

## 2.7 å–æ¶ˆå…³æ³¨ç”¨æˆ·

**æ¥å£**: `DELETE /users/:userId/follow`  
**è¯´æ˜**: å–æ¶ˆå…³æ³¨æŒ‡å®šç”¨æˆ·  
**éœ€è¦è®¤è¯**: æ˜¯

---

## 2.8 è·å–å…³æ³¨åˆ—è¡¨

**æ¥å£**: `GET /users/:userId/following`  
**è¯´æ˜**: è·å–ç”¨æˆ·çš„å…³æ³¨åˆ—è¡¨  
**éœ€è¦è®¤è¯**: å¦

### Query å‚æ•°

```
page: é¡µç 
pageSize: æ¯é¡µæ•°é‡
```

---

## 2.9 è·å–ç²‰ä¸åˆ—è¡¨

**æ¥å£**: `GET /users/:userId/followers`  
**è¯´æ˜**: è·å–ç”¨æˆ·çš„ç²‰ä¸åˆ—è¡¨  
**éœ€è¦è®¤è¯**: å¦

---

## æ•°æ®æ¨¡å‹

### ç”¨æˆ·å…¬å¼€ä¿¡æ¯ (UserPublicVo)

```typescript
interface UserPublicVo {
  id: number;
  username: string;
  nickname: string;
  avatarUrl?: string;
  bio?: string;
  gender?: 'MALE' | 'FEMALE' | 'OTHER' | 'PREFER_NOT_TO_SAY';
  birthDate?: string;
  location?: string;
  postCount: number;
  followerCount: number;
  followingCount: number;
  status: 'ACTIVE' | 'INACTIVE' | 'BANNED' | 'DELETED';
  isFollowing: boolean;
  createdAt: string;
}
```

**è¯´æ˜**: ä¸æ•°æ®åº“usersè¡¨å­—æ®µå®Œå…¨ä¸€è‡´ï¼Œç§»é™¤äº†levelã€badgesç­‰ä¸å­˜åœ¨çš„å­—æ®µ

### ç”¨æˆ·å®Œæ•´ä¿¡æ¯ (UserVo)

```typescript
interface UserVo {
  id: number;
  username: string;
  email?: string;
  phone?: string;
  nickname: string;
  avatarUrl?: string;
  bio?: string;
  gender?: 'MALE' | 'FEMALE' | 'OTHER' | 'PREFER_NOT_TO_SAY';
  birthDate?: string;
  location?: string;
  postCount: number;
  followerCount: number;
  followingCount: number;
  status: 'ACTIVE' | 'INACTIVE' | 'BANNED' | 'DELETED';
  emailVerified: boolean;
  phoneVerified: boolean;
  lastLoginAt?: string;
  lastLoginIp?: string;
  createdAt: string;
  updatedAt: string;
}
```

**è¯´æ˜**: ä¸æ•°æ®åº“usersè¡¨å­—æ®µå®Œå…¨ä¸€è‡´ï¼Œç§»é™¤äº†levelã€pointsã€expã€isVipã€vipExpireAtç­‰ä¸å­˜åœ¨çš„å­—æ®µ

---

## é”™è¯¯ç è¯´æ˜

### ç”¨æˆ·ç›¸å…³é”™è¯¯ç  (40xxx)

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 40001 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 40002 | ç”¨æˆ·å·²å­˜åœ¨ |
| 40003 | å¯†ç é”™è¯¯ |
| 40004 | ç”¨æˆ·å·²è¢«ç¦ç”¨ |
| 40005 | ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v0.1.0  
**æœ€åæ›´æ–°**: 2024-10-29

